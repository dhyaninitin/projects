<mat-drawer-container autosize class="right-drawer" [class.drawer-lg]="false">
  <mat-drawer
    #drawer
    mode="over"
    class="drawer-container"
    position="end"
    [autoFocus]="false"
    [disableClose]="true"
  >
    <app-add-new
      [isOpen]="drawer.opened"
      (toggleDrawer)="onAddNew($event)"
      (getAddNewData)="getAddNewData($event)"
      [componentState]="componentState"
      (disableButton)="changeDisableButton($event)"
      [componentNames]="componentNames"
    ></app-add-new>
  </mat-drawer>
</mat-drawer-container>

<div class="main-container">
  <div class="container-fluid mt-3 d-flex justify-content-end">
    <div class="search_textbox ">
      <mat-form-field appearance="outline" id="search_textbox">
        <mat-label>Search</mat-label>
        <input
          matInput
          placeholder="Search by name"
          type="text"
          name="componentname"
          [(ngModel)]="componentname"
          (ngModelChange)="onSearchComponent()"
        />
        <mat-icon matPrefix id="cursor-default">search</mat-icon>
      </mat-form-field>
    </div>

    <div class="sort-by-div">
      <mat-form-field appearance="outline" id="shortby_dropdown">
        <mat-label>Sort By:</mat-label>
        <mat-icon matPrefix id="cursor-default">sort</mat-icon>
        <mat-select (selectionChange)="onShortByFilter($event)">
          <mat-option value="{{item.name}}" *ngFor="let item of sort_by">{{item.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div>
      <button
        id="increase-height"
        mat-stroked-button
        (click)="onAddNew($event)"
      >
        Add Component
      </button>
    </div>
  </div>

  <div class="container-fluid myCustomScrollar">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z6">
      <ng-container matColumnDef="componentname">
        <th mat-header-cell *matHeaderCellDef>{{ componentName }}</th>
        <td mat-cell *matCellDef="let element">
          {{ element.componentname }}
        </td>
      </ng-container>

      <ng-container matColumnDef="componenttype">
        <th mat-header-cell *matHeaderCellDef>{{ componentType }}</th>
        <td mat-cell *matCellDef="let element">
          {{ element.componenttype }}
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let element">
          <mat-slide-toggle
            (click)="onStatusClicked(element.componentid)"
            [checked]="element.status === 1"
          ></mat-slide-toggle>
        </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let element; let i = index">
          <mat-icon
            id="action-icon"
            matTooltip="edit"
            (click)="onEdit(element)"
            >edit</mat-icon
          >
          <mat-icon
            id="action-icon"
            matTooltip="delete"
            (click)="onDelete(i, element.componentid, element._id)"
            >delete</mat-icon
          >
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <div *ngIf="showNoDataFoundText" class="d-flex justify-content-center mt-2">
      <h3 class="text-muted">No data found</h3>
    </div>
  </div>

  <div class="d-flex justify-content-end btns">
    <button mat-flat-button matStepperPrevious>Previous</button>
    <button
      mat-stroked-button
      matStepperNext
      [style.margin-left]="'10px'"
      [disabled]="dataSource.length <= 0"
      (click)="onNextStep()"
    >
      Next
    </button>
  </div>
</div>
