<div class="w-full h-full bg-pattern flex flex-col items-center justify-center">
  <div @fadeInUp class="card overflow-hidden w-full max-w-xs">
    <mat-progress-bar mode="determinate" class="session-progress"></mat-progress-bar>
    <div class="p-6 pb-0 flex flex-col items-center justify-center">
      <div class="fill-current text-center">
        <img class="w-16" [src]="logoPath">
      </div>
    </div>
    <div class="text-center mt-4">
      <h2 class="title m-0">Welcome back</h2>
      <h4 class="body-2 text-secondary m-0">Sign in with your credentials below.</h4>
    </div>
    <form [formGroup]="signinForm">
      <div class="p-6 flex flex-col gap-4">
        <div class="flex flex-col">
          <mat-form-field class="flex-1">
            <mat-label>E-Mail</mat-label>
            <input formControlName="email" matInput required>
            <mat-error
              *ngIf="signinForm.controls['email'].hasError('required') && signinForm.controls['email'].touched">This
              field is required</mat-error>
          </mat-form-field>
          <mat-form-field class="flex-1">
            <mat-label>Password</mat-label>
            <input [type]="inputType" formControlName="password" matInput required>
            <button (click)="toggleVisibility()" mat-icon-button matSuffix matTooltip="Toggle Visibility" type="button">
              <mat-icon *ngIf="visible" svgIcon="mat:visibility"></mat-icon>
              <mat-icon *ngIf="!visible" svgIcon="mat:visibility_off"></mat-icon>
            </button>
            <mat-hint>Click the eye to toggle visibility</mat-hint>
            <mat-error
              *ngIf="signinForm.controls['password'].hasError('required') && signinForm.controls['password'].touched">Password
              is required</mat-error>
          </mat-form-field>

          <!-- <mat-form-field class="flex-1 pt-2" *ngIf="showOtpInput">
            <mat-label>Enter OTP</mat-label>
            <input formControlName="otp" matInput (input)="onlyEnterNumbers($event)" >
            
            <mat-error
              *ngIf="signinForm.controls['otp'].hasError('required') && signinForm.controls['otp'].touched">Please enter
              OTP</mat-error>
          </mat-form-field> -->
          <span *ngIf="showOtpInput">
            <br>
            <span  class="caption" >Enter Your OTP</span>
            <ng-otp-input (onInputChange)="onOtpChange($event)" 
            [config]="{length:6, allowNumbersOnly: true}"></ng-otp-input>  
          </span>

        </div>

        <div class="flex items-center justify-between" *ngIf="showOtpInput">
          <span *ngIf="displayTime" class="caption">{{displayTime}}</span>
          <a class="caption cursor-pointer" (click)="resendOtp()" 
          *ngIf="twoFaAuthType == 0" [ngClass]="timerOff ? 'pointer-event-none' : ''">Resend OTP</a>
        </div>

        <div class="flex items-center justify-between">
          <mat-checkbox color="primary" class="caption" color="primary" name="rememberMe"
            [formControl]="signinForm.controls['rememberMe']">Remember Me</mat-checkbox>
          <a [routerLink]="'/sessions/forgot-password'" class="caption">Forgot Password?</a>
        </div>

        <button [disabled]="signinForm.invalid || !isValidOTP" color="primary" mat-raised-button (click)="signin()">
          {{btnCaption}}
        </button>
        
      </div>
    </form>
  </div>
</div>